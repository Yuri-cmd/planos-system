<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
        content="Login and Register Form HTML Template - developed by 'ceosdesigns' - sold exclusively on 'themeforest.net'">
    <meta name="author" content="ceosdesigns.sk">
    <title>ERP</title>
    <link href="{{ asset('login/images/favicon.png') }}" rel="icon">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600&amp;display=swap" rel="stylesheet">
    <link href="{{ asset('login/css/all.css') }}" crossorigin="anonymous" rel="stylesheet">
    <link href="{{ asset('login/css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ asset('login/css/styles.css') }}" rel="stylesheet">
    <style type="text/css">
        @keyframes ldio-w6bds7bumam {
            0% {
                top: 96px;
                left: 96px;
                width: 0;
                height: 0;
                opacity: 1;
            }

            100% {
                top: 18px;
                left: 18px;
                width: 156px;
                height: 156px;
                opacity: 0;
            }
        }

        .ldio-w6bds7bumam div {
            position: absolute;
            border-width: 4px;
            border-style: solid;
            opacity: 1;
            border-radius: 50%;
            animation: ldio-w6bds7bumam 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;
        }

        .ldio-w6bds7bumam div:nth-child(1) {
            border-color: #e90c59;
            animation-delay: 0s;
        }

        .ldio-w6bds7bumam div:nth-child(2) {
            border-color: #46dff0;
            animation-delay: -0.5s;
        }

        .loadingio-spinner-ripple-qgb15v4cf7r {
            width: 200px;
            height: 200px;
            display: inline-block;
            overflow: hidden;
            background: #ffffff00;
        }

        .ldio-w6bds7bumam {
            width: 100%;
            height: 100%;
            position: relative;
            transform: translateZ(0) scale(1);
            backface-visibility: hidden;
            transform-origin: 0 0;
            /* see note above */
        }

        .ldio-w6bds7bumam div {
            box-sizing: content-box;
        }

        /* generated by https://loading.io/ */
    </style>
    <style>
        #loader-menor {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
            width: 100%;
            height: 100%;
            background-color: #ffffff96;
            line-height: 100vh;
            text-align: center;
        }
    </style>
</head>

<body>
    <!-- // Preloader -->
    <div id="nm-preloader" class="nm-aic nm-vh-md-100">
        <div class="nm-ripple">
            <div></div>
            <div></div>
        </div>
    </div>
    <div style="display: none" id="loader-menor">
        <div class="loadingio-spinner-ripple-qgb15v4cf7r">
            <div class="ldio-w6bds7bumam">
                <div></div>
                <div></div>
            </div>
        </div>
    </div>
    <!-- Preloader // -->

    <main id="page-content" class="d-flex nm-aic nm-vh-md-100" style="position: relative;">
        <div class="overlay"></div>

        <div class="nm-tm-wr">
            <div class="container">
                <form class="login-form" method="POST" action="{{ route('savePass') }}"
                    onsubmit="return validateForm()">
                    @csrf
                    <div style="background: #ce383a47;" class="nm-hr nm-up-rl-3">
                        <img style="max-width: 100%;" src="{{ asset('login/logo_erp.png') }}">
                    </div>
                    <input type="text" value="{{ $idUsuario }}" name="idUsuario" id="idUsuario" >
                    <div class="input-group nm-gp">
                        <span class="nm-gp-pp"><i class="fas fa-user"></i></span>
                        <input name="password1" type="password" class="form-control" id="password1" tabindex="1"
                            placeholder="Clave" required>
                    </div>
                    <div class="input-group nm-gp">
                        <span class="nm-gp-pp"><i class="fas fa-user"></i></span>
                        <input name="password2" type="password" class="form-control" id="password2" tabindex="2"
                            placeholder="Confirmar Clave" required>
                    </div>
                    <div id="error-message" style="color: red;"></div>
                    <div class="row nm-aic nm-mb-1">
                        <div class="col-sm-6 nm-mb-1 nm-mb-sm-0">
                            <button id="submit" class="btn btn-primary nm-hvr nm-btn-2">Validar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </main>

    <!-- // Vendor JS files -->
    <script src="{{ asset('login/js/jquery-3.6.0.min.js') }}"></script>
    <script src="{{ asset('login/js/bootstrap.bundle.min.js') }}"></script>
    <!-- Vendor JS files // -->

    <!-- Template JS files // -->
    <script src="{{ asset('login/js/script.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        function validateForm() {
            const password1 = document.getElementById('password1').value;
            const password2 = document.getElementById('password2').value;
            const errorMessage = document.getElementById('error-message');
            const regex = /^(?=.*[A-Z])(?=.*\d).{8,}$/;

            if (password1 !== password2) {
                errorMessage.textContent = 'Las contraseñas no coinciden.';
                return false;
            }

            if (!regex.test(password1)) {
                errorMessage.textContent =
                    'La contraseña debe tener al menos 8 caracteres, una letra mayúscula y un número.';
                return false;
            }

            return true;
        }
        @if ($errors->has('usuario'))
            Swal.fire({
                icon: "error",
                title: "Credenciales Incorrectas",
                text: "Usuario o contraseña incorrectas.",
            });
        @endif
    </script>
</body>

</html>
